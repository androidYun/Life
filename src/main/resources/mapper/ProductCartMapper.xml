<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gy.life.mapper.ReserveGoodMapper">
    <resultMap id="BaseResultMap" type="com.gy.life.model.ProductCartDetail">
        <association property="reserveGood" javaType="com.gy.life.model.ReserveGood">
            <id column="reserve_id" jdbcType="INTEGER" property="reserveId"/>
            <result column="image_url" jdbcType="VARCHAR" property="imageUrl"/>
            <result column="good_name" jdbcType="VARCHAR" property="goodName"/>
            <result column="good_desc" jdbcType="VARCHAR" property="goodDesc"/>
            <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
            <result column="max_count" jdbcType="INTEGER" property="maxCount"/>
            <result column="unit" jdbcType="VARCHAR" property="unit"/>
            <result column="reserve_finish_time" jdbcType="TIMESTAMP" property="reserveFinishTime"/>
            <result column="delivery_time" jdbcType="TIMESTAMP" property="deliveryTime"/>
            <result column="pick_address" jdbcType="VARCHAR" property="pickAddress"/>
            <result column="delivery_type" jdbcType="INTEGER" property="deliveryType"/>
            <result column="attention" jdbcType="VARCHAR" property="attention"/>
            <result column="delivery_money" jdbcType="DECIMAL" property="deliveryMoney"/>
            <result column="sell_out_count" jdbcType="INTEGER" property="sellOutCount"/>
            <result column="good_price" jdbcType="DECIMAL" property="goodPrice"/>
            <result column="market_price" jdbcType="DECIMAL" property="marketPrice"/>
            <result column="publish_phone" jdbcType="VARCHAR" property="publishPhone"/>
        </association>
        <association property="productCart" javaType="com.gy.life.model.ProductCart">
            <id column="cart_id" jdbcType="INTEGER" property="cartId"/>
            <result column="product_id" jdbcType="INTEGER" property="productId"/>
            <result column="cart_time" jdbcType="TIMESTAMP" property="cartTime"/>
            <result column="cart_count" jdbcType="INTEGER" property="cartCount"/>
            <result column="user_id" jdbcType="INTEGER" property="userId"/>
        </association>
    </resultMap>


    <select id="selectCartDetails" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select pc.*,rg.* from product_cart pc  LEFT JOIN  reserve_good rg on pc.product_id=rg.reserve_id where user_id=#{userId}
  </select>

    <select id="selectListByCartId" parameterType="java.util.List" resultMap="BaseResultMap">
        select pc.*,rg.* from product_cart pc LEFT JOIN reserve_good rg on pc.product_id=rg.reserve_id where pc.cart_id in
        <foreach item="item" collection="cardIdList" separator="," open="(" close=")" index="">  #{item, jdbcType=INTEGER}
        </foreach>
    </select>
</mapper>